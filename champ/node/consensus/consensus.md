# Consensus Algorithm Implementation Ideas and Problems encountered

## Problem: Spamming new accounts that have a little value and are over a month old can increase a wallets importance further than needed

- **Idea 1: Cap wallet importance at 10% or smth of network voting**
    - Means that voting is no longer linier and less democratic
    - Decreases voting power for people who delegate to a trusted well known Wallet
- **Idea 2: Cap Age_graph at a max to decrease age being a factor**
    - Doesnt fully solve the problem only decreases max voting generated by wallets
- **Idea 3: Cap Delegated power to a wallet**
    - Discourages delegating to a wallet with power even though its a good wallet
    - Makes voting less democratic as some wallets will delegate decreased voting power
    - Evens out all voting over more nodes
    - Encourages looking at other wallets ideas
    - More "Parties" might mean more voting
- **Idea 4: Create algorithm to decide if wallets are for "farming voting" or actual wallets**
    - Really hard to do as algo needs to be high end
    - Probably work around can be found as wallet info is limited
    - Can flag wrong accounts as "farmers"
- **Idea 5: Delegating voting only to a node not a wallet**
    - Less direct representative if multiple prime delegates on a node and therefore less suseptible to farming
    - Will change everything
    - If multiple Prime Delegates on a node, split the voting power
    - Doesnt solve the problem if its one Prime Delegate per node
- **Idea 6: Have hidden ID when creating wallets to see who creates wallets**
    - Can be used to decide if a wallet is farming (ties in to Idea 4)
    - Less private and adds layer of 1984 style observation
    - Can probably be easily countered
- **Idea 7: Have block_graph go negative to force blocks being published**
    - Makes it harder to farm because increased effort
    - Farmers can still send each other blocks to increase importance
    - Encourages trading which increases voting so better to farm
    - Adds data that to decide if a wallet is farming (ties in to Idea 4)
- **Idea 8: Reduce Balance weight but uncap Balance graph and increase block_graph weight**
    - Encourages having only one account
    - Encourages having transactions
- **Idea 9: Increase importance with increasing money outflow but uncap balance**
    - Encourages having more money
    - Encourages actively losing money
    - Nodes will need to lose money to gain importance but losing money will decrease importance
- **Idea 10: Add an inactive tax that decreases importance if the wallet in inactive**
    - Encourages trading
    - Discourages farmer wallets that idle and delegate performance
    - Combined with Idea 9, adding funds and removing them immediatly, to increase trx importance 
    and losing money importance, will be countered as cashflow will be negative
     
1. ### Idea 9: Increase importance with increasing money outflow but uncap balance

    1. Money out of account increases importance
    2. Money owned by an account increases importance

    - **If we slow cap Acc outflow, it still allows acc to increase bank**
        - user has `100$` which gives `10I`
        - user spends `10$` in an epoch, leaving them with `90$` or `9I` but getting `1I` because of outflow. Net `10I`
        - user spends `50$` in an epoch, leaving them with `40$` or `4I` but getting `5I` because outflow. Net `9I` that epoch 

    - **This shows that outflow needs to be maybe `1.5I` to outflow per epoch**
        - user has `100$` which gives `10I`
        - user spends `10$`, `90$` or `9I` but getting `1.5I`. Net `10.5I`
        - user spends `50$`, `40$` or `4I` but getting `7.5I`. Net `11.5I`
        - user spends `10$`, `30$` or `3I` but getting `1.5I`. Net `4.5I`
        - This shows a slow increase in importance as money goes down fast
        - But small outflows are punished by low importance

    - **If outflow is based not on epoch but full time in network**
        - user has `100$` which gives `10I`
        - user spends `10$`, `90$` or `9I` but getting `1I`. Net `10I`
        - user spends `50$`, `40$` or `4I` but getting `6I`. Net `10I`
        - user spends `10$`, `30$` or `3I` but getting `7I`. Net `10I`
        - user spends `30$`, `0$` or `0I` but getting `10I`. Net `10I`
        - This shows that a user with `0$` will have as much importance as `100$` which solves nothing

    - **If outflow is best at 50% of the current balance**
        - unless its between 40-60% of Balance, use 0.5I per 10$
        - user has `100$` which gives `10I`
        - user spends `10$`, `90$` or `9I` but getting `0.5I`. Net `9.5I`
        - user spends `50$`, `40$` or `4I` but getting `5I`. Net `9I`
        - user spends `10$`, `30$` or `3I` but getting `1I`. Net `4I`
        - This shows that balance is still the driving factor for importance and needs to be adjusted to increase importance of outflow

    - **Balance gives 0.5I per 10$, outflow 1I per 10$**
        *This means that Balance is half of outflow but still liniar*
        - user has `100$` which gives `5I`
        - user spends `10$`, `90$` or `4.5I` but getting `1I`. Net `5.5I`
        - user spends `50$`, `40$` or `2I` but getting `5I`. Net `7I`
        - user spends `10$`, `30$` or `1.5I` but getting `1I`. Net `2.5I`
        - user spends `0$`, `30$` or `1.5I`. Net `1.5I`
        - This shows a large increase in importance with a large outflow but low importance with low balance
        - However, adding funds to this account will be a problem as that would need to decrease importance
    
    - **continued, adding funds**
        - user adds `10$`, `40$` or `2I` but losing `1I`. Net `1I`
        - user adds `50$`, `90$` or `4.5I` but losing `5I`. Net `-0.5I`
        - This shows that getting send money will decrease ones importance
        - However, of course, adding funds is needed to pay

    - **Adding funds only loses 50% importance**
        - user adds `10$`, `40$` or `2I` but losing `0.5I`. Net `1.5I`
        - user adds `50$`, `90$` or `4.5I` but losing `2.5I`. Net `2I`
        - user spends `30$`, `60$` or `3I` but getting `3I`. Net `6I` 
        - user spends `0$`, `60$`or `3I`. Net `3I`
        - use spends `60$`, `0$` or `0I` but getting `6I`. Net `6I` 
        - user spends `0$`, `0$` or `0I`. Net `0I`
        - This shows that idle accounts have less importance and accounts that never lose money also have less importance
        - This discourages having idle accounts to boost importance

## Adding an 'Idle' Tax

If a user has idle money on an account without ANY transactions, importance goes down.
This will encourage trading a bit more.
- At the moment the cut is  `Normalized Balance / 5` <br> *(5 is a temporary Tax cut const)*